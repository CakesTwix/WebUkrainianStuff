<Banner
  text="OpenWRT"
  image="/pages/openwrt.png"
  blur="5px"
/>

# Вільна прошивка під твій туполінк (або що в тебе там)

::: info
OpenWrt — операційна система для бездротових Wi-Fi маршрутизаторів, заснована на ядрі Linux. (c) Wikipedia
:::

## Нащо воно мені взагалі треба?

Як правило, вендори роутерів не довго оновлюють своє ПЗ на роутерах, тому досі існує вразливість WPS, котрій скоро буде 20 років!!!!
::: danger Застереження
Якщо ви хочете перевірити наявність вразливості - вам до GitHub шукати репозиторій [OneShot](https://github.com/kimocoder/OneShot/).
Будь ласка, не робить нічого з іншими роутерами, окрім еплів девайсів)))))))
:::

Або хочете налаштувати мережу дуже круто, з використанням VLAN, Mesh, 802.11rvk/etc. Якщо навіть воно там є, но буде проблема коли у вас декілька вендорів, котрі не дуже хочуть співпрацювати з іншими, хоча нічого не заважає, окрім вендорлоків.

## Це легально взагалі?

Як кажуть дебіли у ют шортах чи тіктоках - ні, але це ~~російське~~ іпсо. Ви МАЄТЕ право встановлювати будь яке ПЗ на ВАШ роутер, але після цього вендор може послати вас, якщо потрібна буде допомога, тому ваш шлях буде тільки через ком'юніті.
Якщо вам не сподобається прошивка по якимось причинам, ви завжди зможете відновити заводську прошивку, читайте документацію на OpenWRT під розділом відновлення чи щось таке
Й до речі, сяомі чи глнет під капотом використовують OpenWRT, тому казати, що вона якось нелегальна - тупо, як на мене.

## А воно є під мій роутер?

Спочатку треба дізнатися, чи є взагалі на ваш роутер OpenWRT, [go to site](https://openwrt.org/supported_devices) або гугл у допомогу (OpenWRT Vendor Product, наприклад OpenWRT Redmi AX3000T)!

::: warning Дуже дешеві роутери від TP-Link aka туполінк
Якщо у вас баян по типу 840/841 то раджу купити більш новий тому що навіть сама OpenWRT вже не оновлює їх через нестачу пам'яті, 4/32мб, де 4мб це флешка, це дуже мало.
Я вже мовчу про те, щоб щось круте на ньому побудувати, максимум як другий роутер десь у бабусі
:::

::: danger aSUS або Broadrom
Є такий вендор, як ASUS, котрий любить використовувати чіпсет від броадком. Якщо ви лінуксоїд то простіше сказати про цю компанію можна так - Novideo зі світу WiFi, дуже жадна компанія щодо свого коду, тому на броадкомі WiFI працювати **НЕ БУДЕ**. Я так вже купив собі RT-N15U, але WiFi не було(
:::

## Встановлення

Встановлення у туполінках є простим процесом, відносно сяомі, де треба через вразливості(кібербезпека переоцінена бтв) "оновлюватися", але у туполінках воно більш просте, просто через ОТА встановлюєте OpenWRT. На інших пристроях можливо треба встановлювати TFTP сервер, через котрий роутер у режимі відновлення буде брати прошивку.

## Що цікавого можна зробити

### Adblock
По-перше, AdBlock! Уху, нафіг рекламу! Але як... Т.я це лінукс, то тут є свій пакетний менеджер, через котрий можна встановити будь який софт(ні, фотошоп тут не буде працювати).

::: warning Зауваження
У дев збірках та, можливо, далі вже буде пакетний менеджер apk від проекту Alpine, тому читайте що нового додали у новій версії та загалом, робить бекапи своїх налаштувань!
:::

Щоб встановити софт, треба перейти у System -> Software, оновлюємо список пакунків (це треба буде робити часто т.я зберігати у пам'яті роутеру це дорого). У пошук `adblock` та бачимо великий вибір. Головне знати, що є сервіс та гуї до сервісу, наприклад adblock це сервіс, а luci-adblock це вже гуї, котре додасть зручне налаштування у веб.

### Дашбоард
Далі - красивий дашборд, статус мережі, хто є у мережі, параметри - `luci-mod-dashboard`

![luci-mod-dashboard Interface](https://i.imgur.com/G08zs8U.png)

### Статистика
Зручно мати історію що твориться з роутером, поки вас немає поряд чи чому роутер працює не швидко, так? Ось маємо зручний інтерфейс `luci-app-statistics`
![luci-app-statistics Interface](https://user-images.githubusercontent.com/6316100/154748815-0c46c2ca-c7ea-4502-b46d-421d7b2ee6b7.png)

### Wake on LAN
Треба віддалено увімкнути сервер чи пк? Чи не хочете завантажувати застосунок? Вуаля `luci-app-wol`

### BanIP
Корисно, коли у вас є свій IP, блокує IP адреса по спискам, боти, по країнам(росія там теж є, зручно)), etc

### Mesh 802.11s / 802.11rkv
Технологія 802.11s ака Mesh. Робить мережу на базі WiFi, по котрій передається трафік, корисно, коли у вас багато роутерів у великому будинку
::: warning Зауваження
Дякуємо знову маркетологам. Mesh у вендорах це не тільки 802.11s, а ще й 802.11rkv, тобто швидке перепідключення до іншої AP без великих втрат трафіку
::: danger Щодо 802.11r
В мене він працює тільки коли WPA2 + є вразливість на базі самого стандарту, через котрий легко можна дізнатися PMKID через котрий можна не чекати коли хтось підключиться до мережі, щоб отримати хеш паролю, я вас попередив
:::
:::
Тут вже більш велика тема, котру я не хочу писати тут, тому дам декілька відео англомовних. Сам використовую Batman, зручно налаштовувати сразу декілька роутерів, коли у вас якось налаштований Firewall
1. https://www.youtube.com/watch?v=kMgs2XFClaM (саме про 802.11r aka Fast Roaming)
1. https://www.youtube.com/watch?v=vVoZppb_FR0 (Mesh)
1. https://www.youtube.com/watch?v=t4A0kfg2olo (Mesh Batman)
1. https://www.youtube.com/watch?v=kIuFjoM8QBc (Mesh на базі двух TP-Link)

### Різні мережі, різні VLAN
Якщо у вас є [Home Assistant](/pages/selfhost/homeassistant) то раджу зробити одразу IoT мережу, котра ізольована від основної мережі та немає доступу до Інтернету
::: info Сяомі момент
Встановив я собі PiHole, щоб не мати рекламу, тойво... дивлюся на кількість DNS запитів й бачу... друге місце якийсь `de.ot.io.mi.com`.
Після гуглінгу, зрозумів, що це пінгують цей домен мої Yeelight лампи, котрі підключені до IoT, але шо добре - мають локальне керування.
Питання - нащо воно так пінгує часто? Скоріше за всього просто знати що девайс онлайн, але це блоат якийсь, купуйте краще щось з підтрімкою ESPHome/Tasmota
:::

Тут також складна тема, тому кидаю відразу англомовні відео
1. https://www.youtube.com/watch?v=qeuZqRqH-ug (VLAN)
1. https://www.youtube.com/watch?v=UvniZs8q3eU (IoT/Guest мережа + продовження якщо на другий роутер)

## Цікаві відео українською
Щоб розбавити тему біль українськими відео про OpenWRT, раджу подивитися таких авторів та їх відео

1. [CtrlD](https://www.youtube.com/@CtrlD-3v3) <Badge type="tip" text="Базований" />
    > 1. [UART туполінка від київстару](https://youtu.be/7uAktDaZ5pU)
    > 1. [Дамп прошивки](https://www.youtube.com/watch?v=ww-qwmP9HdI)
    > 1. [Прокачуємо роутер, та компілюємо OpenWrt для нього!](https://www.youtube.com/watch?v=eqKmUvo2MaM)
1. [Моя справа - адмін](https://www.youtube.com/@moya-sprava-admin)
    > 1. [Знакомство с прошивками OpenWrt на примере TP-Link 841](https://www.youtube.com/watch?v=ZTdVWc_nErA) <Badge type="danger" text="російською, але автор перейшов на українську" />
    > 1. [Мегаогляд: GL-iNet Flint 2 (GL-MT6000) - роутер з характером - частина 1](https://www.youtube.com/watch?v=3IrO1tAjf1M) <Badge type="info" text="дуже детальний, раджу подивитися перед покупкою" />
1. [Одинадцятий](https://www.youtube.com/@11TY)
    > 1. [OpenWRT - шлях у кращий світ маршрутизаторів](https://www.youtube.com/watch?v=ee1h-0pj8KA) <Badge type="warning" text="Вендор GL не дуже відкритий, схожий на сяомі, але є доступ до luci" />

import{_ as a,o as i,c as n,ai as e}from"./chunks/framework.DW4R2tNs.js";const c=JSON.parse('{"title":"Network UPS Tools aka NUT","description":"","frontmatter":{},"headers":[],"relativePath":"pages/hardware/ups.md","filePath":"pages/hardware/ups.md","lastUpdated":1769279836000}'),p={name:"pages/hardware/ups.md"};function t(l,s,h,k,r,d){return i(),n("div",null,[...s[0]||(s[0]=[e(`<h1 id="network-ups-tools-aka-nut" tabindex="-1">Network UPS Tools aka NUT <a class="header-anchor" href="#network-ups-tools-aka-nut" aria-label="Permalink to &quot;Network UPS Tools aka NUT&quot;">​</a></h1><p>Конфіг-конфіг-конфіг - старий Linux lore. Це про цю утиліту для управління UPS та отримання стану самого пристрою через CLI.</p><h2 id="встановлення" tabindex="-1">Встановлення <a class="header-anchor" href="#встановлення" aria-label="Permalink to &quot;Встановлення&quot;">​</a></h2><h3 id="arch-linux" tabindex="-1">Arch Linux <a class="header-anchor" href="#arch-linux" aria-label="Permalink to &quot;Arch Linux&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pacman</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nut</span></span></code></pre></div><h3 id="debian" tabindex="-1">Debian <a class="header-anchor" href="#debian" aria-label="Permalink to &quot;Debian&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nut-client</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nut-server</span></span></code></pre></div><p>Після встановлення у нас буде:</p><ol><li>Користувач nut, чия домашня директорія знаходиться в /var/lib/nut.</li><li>Конфігурація в основному виконується в /etc/nut.</li><li>Служби вимагають попередньої конфігурації: <code>nut-(client,driver,server,monitor)</code></li></ol><h2 id="конфігурація-конфігів" tabindex="-1">Конфігурація конфігів! <a class="header-anchor" href="#конфігурація-конфігів" aria-label="Permalink to &quot;Конфігурація конфігів!&quot;">​</a></h2><h3 id="визначаємо-чи-бачить-nut-ваш-ups" tabindex="-1">Визначаємо чи бачить NUT ваш UPS <a class="header-anchor" href="#визначаємо-чи-бачить-nut-ваш-ups" aria-label="Permalink to &quot;Визначаємо чи бачить NUT ваш UPS&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nut-scanner</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cakestwix@tvbox:~$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nut-scanner</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Cannot</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> load</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> SNMP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> library</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (libnetsnmp.so.40) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> file not found. SNMP search disabled.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Cannot</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> load</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> XML</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> library</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (libneon.so.27) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> file not found. XML search disabled.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Cannot</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> load</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> AVAHI</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> library</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (libavahi-client.so.3) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> file not found. AVAHI search disabled.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Cannot</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> load</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> IPMI</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> library</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (libfreeipmi.so.17) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> file not found. IPMI search disabled.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Scanning</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> USB</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bus.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">No</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> IP,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> skipping</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> NUT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (old </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">connect</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[nutdev1]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        driver</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;nutdrv_qx&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        port</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;auto&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        vendorid</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;0665&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        productid</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;5161&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        product</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;USB to Serial&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        vendor</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Cypress Semiconductor&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        bus</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;001&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        device</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;008&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        busport</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;002&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        ###NOTMATCHED-YET###bcdDevice = &quot;0002&quot;</span></span></code></pre></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p><code>nutdev1</code> є назвою UPS за якою можна до нього звертатися</p></div><p>Якщо усе добре то копіюємо цей конфіг до <code>/etc/nut/ups.conf</code></p><h3 id="додаємо-udev-правило" tabindex="-1">Додаємо udev-правило <a class="header-anchor" href="#додаємо-udev-правило" aria-label="Permalink to &quot;Додаємо udev-правило&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nano</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/udev/rules.d/99_nut-serialups.rules</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>KERNEL==&quot;ttyS0&quot;, GROUP=&quot;nut&quot;</span></span></code></pre></div><p>Ребутаємо щоб точно, або рестартимо udev</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> udevadm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> control</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --reload</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> udevadm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> trigger</span></span></code></pre></div><h4 id="тестуємо-конфіг" tabindex="-1">Тестуємо конфіг <a class="header-anchor" href="#тестуємо-конфіг" aria-label="Permalink to &quot;Тестуємо конфіг&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">upsdrvctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span></span></code></pre></div><h3 id="вмикаємо-upsd" tabindex="-1">Вмикаємо upsd <a class="header-anchor" href="#вмикаємо-upsd" aria-label="Permalink to &quot;Вмикаємо upsd&quot;">​</a></h3><p>Міняємо режим з <code>none</code> на <code>netserver</code></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/etc/nut/nut.conf</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">##############################################################################</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># The MODE determines which part of the NUT is to be started, and which</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># configuration files must be modified.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># This file try to standardize the various files being found in the field, like</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># /etc/default/nut on Debian based systems, /etc/sysconfig/ups on RedHat based</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># systems, ... Distribution&#39;s init script should source this file to see which</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># component(s) has to be started.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># The values of MODE can be:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># - none: NUT is not configured, or use the Integrated Power Management, or use</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#   some external system to startup NUT components. So nothing is to be started.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># - standalone: This mode address a local only configuration, with 1 UPS</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#   protecting the local system. This implies to start the 3 NUT layers (driver,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#   upsd and upsmon) and the matching configuration files. This mode can also</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#   address UPS redundancy.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># - netserver: same as for the standalone configuration, but also need</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#   some more network access controls (firewall, tcp-wrappers) and possibly a</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#   specific LISTEN directive in upsd.conf.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#   Since this MODE is opened to the network, a special care should be applied</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#   to security concerns.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># - netclient: this mode only requires upsmon.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># IMPORTANT NOTE:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#  This file is intended to be sourced by shell scripts.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#  You MUST NOT use spaces around the equal sign!</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MODE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">none</span></span></code></pre></div><h3 id="робимо-юзерів-для-зв-язку-поза-upsc" tabindex="-1">Робимо юзерів для зв&#39;язку поза upsc <a class="header-anchor" href="#робимо-юзерів-для-зв-язку-поза-upsc" aria-label="Permalink to &quot;Робимо юзерів для зв&#39;язку поза upsc&quot;">​</a></h3><p>Основний конфіг-файл лежить у <code>/etc/nut/upsd.users</code>, його треба відредагувати</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">upsuser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     password = password</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     upsmon primary</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     actions = SET</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     instcmds = ALL</span></span></code></pre></div><h3 id="тестуємо-клієнтом-зв-язок" tabindex="-1">Тестуємо клієнтом зв&#39;язок <a class="header-anchor" href="#тестуємо-клієнтом-зв-язок" aria-label="Permalink to &quot;Тестуємо клієнтом зв&#39;язок&quot;">​</a></h3><p>Нарешті запускаємо сервіс <code>nut-server</code></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --now</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nut-server</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">upsc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nutdev1</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>cakestwix@tvbox:~$ upsc ups</span></span>
<span class="line"><span>Init SSL without certificate database</span></span>
<span class="line"><span>battery.charge: 100</span></span>
<span class="line"><span>battery.voltage: 13.50</span></span>
<span class="line"><span>battery.voltage.high: 13.50</span></span>
<span class="line"><span>battery.voltage.low: 8.0</span></span>
<span class="line"><span>battery.voltage.nominal: 12.0</span></span>
<span class="line"><span>device.type: ups</span></span>
<span class="line"><span>driver.debug: 0</span></span>
<span class="line"><span>driver.flag.allow_killpower: 0</span></span>
<span class="line"><span>driver.name: blazer_usb</span></span>
<span class="line"><span>driver.parameter.default.battery.voltage.high: 13.50</span></span>
<span class="line"><span>driver.parameter.default.battery.voltage.low: 8.0</span></span>
<span class="line"><span>driver.parameter.pollinterval: 2</span></span>
<span class="line"><span>driver.parameter.port: auto</span></span>
<span class="line"><span>driver.parameter.product: USB to Serial</span></span>
<span class="line"><span>driver.parameter.productid: 5161</span></span>
<span class="line"><span>driver.parameter.synchronous: auto</span></span>
<span class="line"><span>driver.parameter.vendor: Cypress Semiconductor</span></span>
<span class="line"><span>driver.parameter.vendorid: 0665</span></span>
<span class="line"><span>driver.state: quiet</span></span>
<span class="line"><span>driver.version: 2.8.1</span></span>
<span class="line"><span>driver.version.internal: 0.17</span></span>
<span class="line"><span>driver.version.usb: libusb-1.0.28 (API: 0x100010a)</span></span>
<span class="line"><span>input.current.nominal: 2.0</span></span>
<span class="line"><span>input.frequency: 49.9</span></span>
<span class="line"><span>input.frequency.nominal: 50</span></span>
<span class="line"><span>input.voltage: 233.3</span></span>
<span class="line"><span>input.voltage.fault: 232.8</span></span>
<span class="line"><span>input.voltage.nominal: 220</span></span>
<span class="line"><span>output.voltage: 232.8</span></span>
<span class="line"><span>ups.beeper.status: disabled</span></span>
<span class="line"><span>ups.delay.shutdown: 30</span></span>
<span class="line"><span>ups.delay.start: 180</span></span>
<span class="line"><span>ups.load: 5</span></span>
<span class="line"><span>ups.productid: 5161</span></span>
<span class="line"><span>ups.status: OL</span></span>
<span class="line"><span>ups.temperature: 25.0</span></span>
<span class="line"><span>ups.type: offline / line interactive</span></span>
<span class="line"><span>ups.vendorid: 0665</span></span></code></pre></div><h2 id="підключення-ups-до-home-assistant" tabindex="-1">Підключення UPS до Home Assistant <a class="header-anchor" href="#підключення-ups-до-home-assistant" aria-label="Permalink to &quot;Підключення UPS до Home Assistant&quot;">​</a></h2><p>Home Assistant має <a href="https://www.home-assistant.io/integrations/nut" target="_blank" rel="noreferrer">офіційну інтеграцію</a> з NUT, налаштовується через GUI.</p><p>З того, що нам треба це</p><ol><li>Хост, тобто іп адреса, скоріше за всього localhost</li><li>Порт, за умовчанням це 3493</li><li>Юзернейм, <a href="#робимо-юзерів-для-зв-язку-поза-upsc">ви його робили</a></li><li>Пароль, <a href="#робимо-юзерів-для-зв-язку-поза-upsc">ви його робили</a></li></ol><h2 id="що-не-зробив-але-треба-б-це-на-сервері" tabindex="-1">Що не зробив, але треба б це на сервері <a class="header-anchor" href="#що-не-зробив-але-треба-б-це-на-сервері" aria-label="Permalink to &quot;Що не зробив, але треба б це на сервері&quot;">​</a></h2><p>Нещодавно хотів налаштувати UPS/NUT щоб коли нема світла то сервер вимикався, але другий UPS згорів, хнек, а перший працює тільки як &quot;повербанк&quot; під роутер. Знаю, що це не дуже розумно робити 12 -&gt; 220 -&gt; 12, але що поробиш, зробив базове налаштування для себе.</p>`,40)])])}const u=a(p,[["render",t]]);export{c as __pageData,u as default};
